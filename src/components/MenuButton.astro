---
import type { HTMLAttributes } from "astro/types"

import List from "@/icons/phosphor/List.astro"
import X from "@/icons/phosphor/X.astro"

type Props = HTMLAttributes<"button"> & {
  state: "open" | "closed"
}

const { state, class: className, ...props } = Astro.props
const isOpen = state === "open"
---

<button
  aria-expanded={isOpen}
  aria-label={isOpen ? "Cerrar menú." : "Abrir menú."}
  class:list={[
    "group inline-grid",
    "[&_svg]:col-start-1 [&_svg]:row-start-1",
    "[&_svg]:pointer-events-none [&_svg]:size-8 [&_svg]:shrink-0",
    "[&_svg]:transition-[transform,opacity] [&_svg]:duration-300 [&_svg]:ease-out",
    className,
  ]}
  data-state="closed"
  type="button"
  {...props}
>
  <List class="group-data-open:-rotate-45 group-data-open:opacity-0" />
  <X class="rotate-45 opacity-0 group-data-open:rotate-0 group-data-open:opacity-100" />
</button>
